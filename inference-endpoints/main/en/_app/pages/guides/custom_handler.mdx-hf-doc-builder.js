import{S as Jr,i as Xr,s as Kr,e as s,k as h,w as f,t as n,M as Qr,c as l,d as a,m as u,a as o,x as m,h as r,b as d,G as t,g as p,y,L as Zr,q as _,o as v,B as w,v as Vr}from"../../chunks/vendor-hf-doc-builder.js";import{I as W}from"../../chunks/IconCopyLink-hf-doc-builder.js";import{C as B}from"../../chunks/CodeBlock-hf-doc-builder.js";function ei(pn){let I,ca,D,Y,yt,ue,qs,_t,Ps,fa,U,xs,ce,Ts,Is,ma,E,Ds,fe,Ns,Os,me,Ss,Ls,vt,zs,Ms,wt,Fs,Rs,ya,A,Ws,ye,Bs,Ys,Et,Us,Gs,_a,N,G,gt,_e,Js,bt,Xs,va,$,Ks,ve,Qs,Zs,$t,Vs,el,we,tl,al,wa,tt,sl,Ea,c,jt,Ee,ll,ol,kt,ge,nl,rl,At,be,il,pl,Ht,$e,dl,hl,Ct,je,ul,cl,qt,ke,fl,ml,Pt,Ae,yl,ga,O,J,xt,He,_l,Tt,vl,ba,H,wl,It,El,gl,Ce,bl,$l,$a,X,jl,qe,kl,Al,ja,K,Hl,Pe,Cl,ql,ka,xe,Pl,Te,xl,Aa,S,Q,Dt,Ie,Tl,Nt,Il,Ha,at,Dl,Ca,De,qa,st,Nl,Pa,Z,Ol,Ne,Sl,Ll,xa,Oe,Ta,V,zl,Ot,Ml,Fl,Ia,lt,St,Rl,Da,Se,Na,L,ee,Lt,Le,Wl,zt,Bl,Oa,g,Yl,Mt,Ul,Gl,Ft,Jl,Xl,Rt,Kl,Ql,Wt,Zl,Vl,Sa,te,eo,Bt,to,ao,La,C,so,Yt,lo,oo,Ut,no,ro,za,ae,io,Gt,po,ho,Ma,ze,Fa,j,uo,Jt,co,fo,Xt,mo,yo,Kt,_o,vo,Ra,Me,Wa,z,se,Qt,Fe,wo,Zt,Eo,Ba,le,go,Re,bo,$o,Ya,We,Vt,jo,ko,Ua,q,Ao,ea,Ho,Co,Be,qo,Po,Ga,Ye,Ja,P,xo,ta,To,Io,aa,Do,No,Xa,Ue,Ka,M,oe,sa,Ge,Oo,la,So,Qa,ot,Lo,Za,Je,Va,nt,zo,es,rt,oa,Mo,ts,F,ne,na,Xe,Fo,ra,Ro,as,it,Wo,ss,Ke,ls,k,Bo,ia,Yo,Uo,pa,Go,Jo,Qe,Xo,Ko,os,R,re,da,Ze,Qo,ha,Zo,ns,pt,Vo,rs,ie,en,ua,tn,an,is,dt,Ve,sn,et,ln,on,ps;return ue=new W({}),_e=new W({}),He=new W({}),Ie=new W({}),De=new B({props:{code:`# install git-lfs to interact with the repository
!sudo apt-get update
!sudo apt-get install git-lfs
# install transformers (not needed since it is installed by default in the container)
!pip install transformers[sklearn,sentencepiece,audio,vision]`,highlighted:`<span class="hljs-comment"># install git-lfs to interact with the repository</span>
!sudo apt-<span class="hljs-built_in">get</span> update
!sudo apt-<span class="hljs-built_in">get</span> install git-lfs
<span class="hljs-comment"># install transformers (not needed since it is installed by default in the container)</span>
!pip install transformers[sklearn,sentencepiece,audio,vision]`}}),Oe=new B({props:{code:`!git lfs install
!git clone https://huggingface.co/philschmid/distilbert-base-uncased-emotion`,highlighted:`!git lfs install
!git clone https:<span class="hljs-regexp">//</span>huggingface.co<span class="hljs-regexp">/philschmid/</span>distilbert-base-uncased-emotion`}}),Se=new B({props:{code:`# setup cli with token
!huggingface-cli login
!git config --global credential.helper store`,highlighted:`# setup cli with token
<span class="hljs-title">!huggingface-cli</span> login
<span class="hljs-title">!git</span> config --<span class="hljs-keyword">global</span> credential.helper <span class="hljs-keyword">store</span>`}}),Le=new W({}),ze=new B({props:{code:"!cd distilbert-base-uncased-emotion && touch handler.py",highlighted:'!<span class="hljs-built_in">cd</span> distilbert-base-uncased-emotion &amp;&amp; <span class="hljs-built_in">touch</span> handler.py'}}),Me=new B({props:{code:`from typing import Dict, List, Any

class EndpointHandler():
    def __init__(self, path=""):
        # Preload all the elements you are going to need at inference.
        # pseudo:
        # self.model= load_model(path)

    def __call__(self, data: Dict[str, Any]) -> List[Dict[str, Any]]:
        """
       data args:
            inputs (:obj: \`str\` | \`PIL.Image\` | \`np.array\`)
            kwargs
      Return:
            A :obj:\`list\` | \`dict\`: will be serialized and returned
        """

        # pseudo
        # self.model(input)`,highlighted:`<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">List</span>, <span class="hljs-type">Any</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">EndpointHandler</span>():
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, path=<span class="hljs-string">&quot;&quot;</span></span>):
        <span class="hljs-comment"># Preload all the elements you are going to need at inference.</span>
        <span class="hljs-comment"># pseudo:</span>
        <span class="hljs-comment"># self.model= load_model(path)</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, data: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]:
        <span class="hljs-string">&quot;&quot;&quot;
       data args:
            inputs (:obj: \`str\` | \`PIL.Image\` | \`np.array\`)
            kwargs
      Return:
            A :obj:\`list\` | \`dict\`: will be serialized and returned
        &quot;&quot;&quot;</span>

        <span class="hljs-comment"># pseudo</span>
        <span class="hljs-comment"># self.model(input)</span>`}}),Fe=new W({}),Ye=new B({props:{code:`!echo "holidays" >> requirements.txt
!pip install -r requirements.txt`,highlighted:`!echo <span class="hljs-string">&quot;holidays&quot;</span> &gt;&gt; requirements.txt
!pip install -r requirements.txt`}}),Ue=new B({props:{code:`from typing import Dict, List, Any
from transformers import pipeline
import holidays

class EndpointHandler():
    def __init__(self, path=""):
        self.pipeline = pipeline("text-classification",model=path)
        self.holidays = holidays.US()

    def __call__(self, data: Dict[str, Any]) -> List[Dict[str, Any]]:
        """
       data args:
            inputs (:obj: \`str\`)
            date (:obj: \`str\`)
      Return:
            A :obj:\`list\` | \`dict\`: will be serialized and returned
        """
        # get inputs
        inputs = data.pop("inputs",data)
        date = data.pop("date", None)

        # check if date exists and if it is a holiday
        if date is not None and date in self.holidays:
          return [{"label": "happy", "score": 1}]


        # run normal prediction
        prediction = self.pipeline(inputs)
        return prediction`,highlighted:`<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">List</span>, <span class="hljs-type">Any</span>
<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> pipeline
<span class="hljs-keyword">import</span> holidays

<span class="hljs-keyword">class</span> <span class="hljs-title class_">EndpointHandler</span>():
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, path=<span class="hljs-string">&quot;&quot;</span></span>):
        self.pipeline = pipeline(<span class="hljs-string">&quot;text-classification&quot;</span>,model=path)
        self.holidays = holidays.US()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, data: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]:
        <span class="hljs-string">&quot;&quot;&quot;
       data args:
            inputs (:obj: \`str\`)
            date (:obj: \`str\`)
      Return:
            A :obj:\`list\` | \`dict\`: will be serialized and returned
        &quot;&quot;&quot;</span>
        <span class="hljs-comment"># get inputs</span>
        inputs = data.pop(<span class="hljs-string">&quot;inputs&quot;</span>,data)
        date = data.pop(<span class="hljs-string">&quot;date&quot;</span>, <span class="hljs-literal">None</span>)

        <span class="hljs-comment"># check if date exists and if it is a holiday</span>
        <span class="hljs-keyword">if</span> date <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> date <span class="hljs-keyword">in</span> self.holidays:
          <span class="hljs-keyword">return</span> [{<span class="hljs-string">&quot;label&quot;</span>: <span class="hljs-string">&quot;happy&quot;</span>, <span class="hljs-string">&quot;score&quot;</span>: <span class="hljs-number">1</span>}]


        <span class="hljs-comment"># run normal prediction</span>
        prediction = self.pipeline(inputs)
        <span class="hljs-keyword">return</span> prediction`}}),Ge=new W({}),Je=new B({props:{code:`from handler import EndpointHandler

# init handler
my_handler = EndpointHandler(path=".")

# prepare sample payload
non_holiday_payload = {"inputs": "I am quite excited how this will turn out", "date": "2022-08-08"}
holiday_payload = {"inputs": "Today is a though day", "date": "2022-07-04"}

# test the handler
non_holiday_pred=my_handler(non_holiday_payload)
holiday_payload=my_handler(holiday_payload)

# show results
print("non_holiday_pred", non_holiday_pred)
print("holiday_payload", holiday_payload)

# non_holiday_pred [{'label': 'joy', 'score': 0.9985942244529724}]
# holiday_payload [{'label': 'happy', 'score': 1}]`,highlighted:`<span class="hljs-keyword">from</span> handler <span class="hljs-keyword">import</span> EndpointHandler

<span class="hljs-comment"># init handler</span>
my_handler = EndpointHandler(path=<span class="hljs-string">&quot;.&quot;</span>)

<span class="hljs-comment"># prepare sample payload</span>
non_holiday_payload = {<span class="hljs-string">&quot;inputs&quot;</span>: <span class="hljs-string">&quot;I am quite excited how this will turn out&quot;</span>, <span class="hljs-string">&quot;date&quot;</span>: <span class="hljs-string">&quot;2022-08-08&quot;</span>}
holiday_payload = {<span class="hljs-string">&quot;inputs&quot;</span>: <span class="hljs-string">&quot;Today is a though day&quot;</span>, <span class="hljs-string">&quot;date&quot;</span>: <span class="hljs-string">&quot;2022-07-04&quot;</span>}

<span class="hljs-comment"># test the handler</span>
non_holiday_pred=my_handler(non_holiday_payload)
holiday_payload=my_handler(holiday_payload)

<span class="hljs-comment"># show results</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;non_holiday_pred&quot;</span>, non_holiday_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;holiday_payload&quot;</span>, holiday_payload)

<span class="hljs-comment"># non_holiday_pred [{&#x27;label&#x27;: &#x27;joy&#x27;, &#x27;score&#x27;: 0.9985942244529724}]</span>
<span class="hljs-comment"># holiday_payload [{&#x27;label&#x27;: &#x27;happy&#x27;, &#x27;score&#x27;: 1}]</span>`}}),Xe=new W({}),Ke=new B({props:{code:`# add all our new files
!git add *
# commit our files
!git commit -m "add custom handler"
# push the files to the hub
!git push`,highlighted:`# <span class="hljs-built_in">add</span> <span class="hljs-keyword">all</span> our <span class="hljs-keyword">new</span> <span class="hljs-keyword">files</span>
!git <span class="hljs-built_in">add</span> *
# commit our <span class="hljs-keyword">files</span>
!git commit -<span class="hljs-keyword">m</span> <span class="hljs-string">&quot;add custom handler&quot;</span>
# push the <span class="hljs-keyword">files</span> <span class="hljs-keyword">to</span> the hub
!git push`}}),Ze=new W({}),{c(){I=s("meta"),ca=h(),D=s("h1"),Y=s("a"),yt=s("span"),f(ue.$$.fragment),qs=h(),_t=s("span"),Ps=n("Create custom Inference Handler"),fa=h(),U=s("p"),xs=n("Hugging Face Endpoints supports all of the Transformers and Sentence-Transformers tasks and can support custom tasks, including custom pre- & post-processing. The customization can be done through a "),ce=s("a"),Ts=n("handler.py"),Is=n(" file in your model repository on the Hugging Face Hub."),ma=h(),E=s("p"),Ds=n("The "),fe=s("a"),Ns=n("handler.py"),Os=n(" needs to implement the "),me=s("a"),Ss=n("EndpointHandler"),Ls=n(" class with a "),vt=s("code"),zs=n("__init__"),Ms=n(" and a "),wt=s("code"),Fs=n("__call__"),Rs=n(" method."),ya=h(),A=s("p"),Ws=n("If you want to use custom dependencies, e.g. "),ye=s("a"),Bs=n("optimum"),Ys=n(", the dependencies must be listed in a "),Et=s("code"),Us=n("requirements.txt"),Gs=n(" as described above in \u201Cadd custom dependencies.\u201D"),_a=h(),N=s("h2"),G=s("a"),gt=s("span"),f(_e.$$.fragment),Js=h(),bt=s("span"),Xs=n("Custom Handler Examples"),va=h(),$=s("p"),Ks=n("There are already several public examples on the "),ve=s("a"),Qs=n("Hugging Face Hub"),Zs=n(" where you can take insipiration or directly use them. The repositories are tagged with "),$t=s("code"),Vs=n("endpoints-template"),el=n(" and can be found under this "),we=s("a"),tl=n("link"),al=n("."),wa=h(),tt=s("p"),sl=n("Included examples are for:"),Ea=h(),c=s("ul"),jt=s("li"),Ee=s("a"),ll=n("Optimum and ONNX Runtime"),ol=h(),kt=s("li"),ge=s("a"),nl=n("Diffusers with stable-diffusion"),rl=h(),At=s("li"),be=s("a"),il=n("Image Embeddings with BLIP"),pl=h(),Ht=s("li"),$e=s("a"),dl=n("TrOCR for OCR Detection"),hl=h(),Ct=s("li"),je=s("a"),ul=n("Optimized Sentence Transformers with Optimum"),cl=h(),qt=s("li"),ke=s("a"),fl=n("OpenAI Whisper"),ml=h(),Pt=s("li"),Ae=s("a"),yl=n("LayoutLM"),ga=h(),O=s("h2"),J=s("a"),xt=s("span"),f(He.$$.fragment),_l=h(),Tt=s("span"),vl=n("Tutorial"),ba=h(),H=s("p"),wl=n("Before creating a Custom Handler, you need a Hugging Face Model repository with your model weights and an Access Token with "),It=s("em"),El=n("WRITE"),gl=n(" access to the repository. To find, create and manage Access Tokens, click "),Ce=s("a"),bl=n("here"),$l=n("."),$a=h(),X=s("p"),jl=n("If you want to write a Custom Handler for an existing model from the community, you can use the "),qe=s("a"),kl=n("repo_duplicator"),Al=n(" to create a repository fork."),ja=h(),K=s("p"),Hl=n("The code can also be found in this "),Pe=s("a"),Cl=n("Notebook"),ql=n("."),ka=h(),xe=s("p"),Pl=n("You can also search for already existing Custom Handlers here: "),Te=s("a"),xl=n("https://huggingface.co/models?other=endpoints-template"),Aa=h(),S=s("h3"),Q=s("a"),Dt=s("span"),f(Ie.$$.fragment),Tl=h(),Nt=s("span"),Il=n("1. Set up Development Environment"),Ha=h(),at=s("p"),Dl=n("The easiest way to develop your Custom Handler is to set up a local development environment and to implement, test, and iterate on your handler and then deploy it as an Inference Endpoint. The first step is to install all required development dependencies (needed to create the CP, not needed for inference)."),Ca=h(),f(De.$$.fragment),qa=h(),st=s("p"),Nl=n("After we have installed our libraries we will clone our repository to our development environment."),Pa=h(),Z=s("p"),Ol=n("We will use "),Ne=s("a"),Sl=n("philschmid/distilbert-base-uncased-emotion"),Ll=n(" during the tutorial."),xa=h(),f(Oe.$$.fragment),Ta=h(),V=s("p"),zl=n("To be able to push our CP later you need to login into our HF account. This can be done by using the "),Ot=s("code"),Ml=n("huggingface-cli"),Fl=n("."),Ia=h(),lt=s("p"),St=s("em"),Rl=n("Note: Make sure to configure git config as well."),Da=h(),f(Se.$$.fragment),Na=h(),L=s("h3"),ee=s("a"),Lt=s("span"),f(Le.$$.fragment),Wl=h(),zt=s("span"),Bl=n("2. Create EndpointHandler (CP)"),Oa=h(),g=s("p"),Yl=n("After you have set up your environment, you can start creating your CP. The CP is a Python class ("),Mt=s("code"),Ul=n("EndpointHandler"),Gl=n(") inside a "),Ft=s("code"),Jl=n("handler.py"),Xl=n(" file in our repository. The handler.py needs to implement the EndpointHandler class with a "),Rt=s("code"),Kl=n("__init__"),Ql=n(" and a "),Wt=s("code"),Zl=n("__call__"),Vl=n(" method."),Sa=h(),te=s("p"),eo=n("The "),Bt=s("code"),to=n("__init__"),ao=n(" method will be called when starting the Endpoint and will receive 1 argument, a string with the path to your model weights. This allows you to load your model correctly."),La=h(),C=s("p"),so=n("The "),Yt=s("code"),lo=n("__call__"),oo=n(" method will be called on every request and receive a dictionary with your request body as a python dictionary. It will always contain the "),Ut=s("code"),no=n("inputs"),ro=n(" key."),za=h(),ae=s("p"),io=n("To create your "),Gt=s("code"),po=n("handler.py"),ho=n(" you have to first switch into your repository and create the file."),Ma=h(),f(ze.$$.fragment),Fa=h(),j=s("p"),uo=n("In there, you define your "),Jt=s("code"),co=n("EndpointHandler"),fo=n(" class with the "),Xt=s("code"),mo=n("__init__"),yo=n(" and "),Kt=s("code"),_o=n("__call__ "),vo=n("method."),Ra=h(),f(Me.$$.fragment),Wa=h(),z=s("h3"),se=s("a"),Qt=s("span"),f(Fe.$$.fragment),wo=h(),Zt=s("span"),Eo=n("3. Customize EndpointHandler"),Ba=h(),le=s("p"),go=n("Now, you can add all of the custom logic you want to use during initialization or inference to your CP. You can already find multiple "),Re=s("a"),bo=n("Custom Handler on the Hub"),$o=n(" if you need some inspiration. In our example, we will add a custom condition based on additional payload information."),Ya=h(),We=s("p"),Vt=s("em"),jo=n("The model we are using in the tutorial is fine-tuned to detect emotions. We will add an additional payload field for the date, and will use an external package to check if it is a holiday, to add a condition so that when the input date is a holiday, the model returns \u201Chappy\u201D - since everyone is happy when there are holidays "),ko=n("\u{1F334}\u{1F389}\u{1F606}"),Ua=h(),q=s("p"),Ao=n("First, we need to create a new "),ea=s("code"),Ho=n("requirements.txt"),Co=n(" and add our "),Be=s("a"),qo=n("holiday detection package"),Po=n(" and make sure we have it installed in our development environment as well."),Ga=h(),f(Ye.$$.fragment),Ja=h(),P=s("p"),xo=n("Next, we have to adjust our "),ta=s("code"),To=n("handler.py"),Io=n(" and "),aa=s("code"),Do=n("EndpointHandler"),No=n(" to match our condition."),Xa=h(),f(Ue.$$.fragment),Ka=h(),M=s("h3"),oe=s("a"),sa=s("span"),f(Ge.$$.fragment),Oo=h(),la=s("span"),So=n("4. Test EndpointHandler"),Qa=h(),ot=s("p"),Lo=n("To test our EndpointHandler, we can simplify import, initialize and test it. Therefore we only need to prepare a sample payload."),Za=h(),f(Je.$$.fragment),Va=h(),nt=s("p"),zo=n("It works!!!! \u{1F389}"),es=h(),rt=s("p"),oa=s("em"),Mo=n("Note: If you are using a notebook you might have to restart your kernel when you make changes to the handler.py since it is not automatically re-imported."),ts=h(),F=s("h3"),ne=s("a"),na=s("span"),f(Xe.$$.fragment),Fo=h(),ra=s("span"),Ro=n("5. Push the Custom Handler to your repository"),as=h(),it=s("p"),Wo=n("After you have successfully tested your handler locally, you can push it to your repository by simply using basic git commands."),ss=h(),f(Ke.$$.fragment),ls=h(),k=s("p"),Bo=n("Now, you should see your "),ia=s("code"),Yo=n("handler.py"),Uo=n(" and "),pa=s("code"),Go=n("requirements.txt"),Jo=n(" in your repository in the "),Qe=s("a"),Xo=n("\u201CFiles and version\u201D"),Ko=n(" tab."),os=h(),R=s("h3"),re=s("a"),da=s("span"),f(Ze.$$.fragment),Qo=h(),ha=s("span"),Zo=n("6. Deploy your Custom Handler as an Inference Endpoint"),ns=h(),pt=s("p"),Vo=n("The last step is to deploy your Custom Handler as an Inference Endpoint. You can deploy your custom Custom Handler the same way as a regular Inference Endpoint. Add your repository, select your cloud and region, your instance and security setting, and deploy."),rs=h(),ie=s("p"),en=n("The Inference Endpoint Service will check during the creation of your Endpoint if there is a "),ua=s("code"),tn=n("handler.py"),an=n(" available and valid and will use it for serving requests no matter which \u201CTask\u201D you select."),is=h(),dt=s("p"),Ve=s("em"),sn=n("Note: In your "),et=s("a"),ln=n("Inference Endpoints dashboard"),on=n(", the Task for this Endpoint should now be set to Custom"),this.h()},l(e){const i=Qr('[data-svelte="svelte-1phssyn"]',document.head);I=l(i,"META",{name:!0,content:!0}),i.forEach(a),ca=u(e),D=l(e,"H1",{class:!0});var ds=o(D);Y=l(ds,"A",{id:!0,class:!0,href:!0});var dn=o(Y);yt=l(dn,"SPAN",{});var hn=o(yt);m(ue.$$.fragment,hn),hn.forEach(a),dn.forEach(a),qs=u(ds),_t=l(ds,"SPAN",{});var un=o(_t);Ps=r(un,"Create custom Inference Handler"),un.forEach(a),ds.forEach(a),fa=u(e),U=l(e,"P",{});var hs=o(U);xs=r(hs,"Hugging Face Endpoints supports all of the Transformers and Sentence-Transformers tasks and can support custom tasks, including custom pre- & post-processing. The customization can be done through a "),ce=l(hs,"A",{href:!0,rel:!0});var cn=o(ce);Ts=r(cn,"handler.py"),cn.forEach(a),Is=r(hs," file in your model repository on the Hugging Face Hub."),hs.forEach(a),ma=u(e),E=l(e,"P",{});var x=o(E);Ds=r(x,"The "),fe=l(x,"A",{href:!0,rel:!0});var fn=o(fe);Ns=r(fn,"handler.py"),fn.forEach(a),Os=r(x," needs to implement the "),me=l(x,"A",{href:!0,rel:!0});var mn=o(me);Ss=r(mn,"EndpointHandler"),mn.forEach(a),Ls=r(x," class with a "),vt=l(x,"CODE",{});var yn=o(vt);zs=r(yn,"__init__"),yn.forEach(a),Ms=r(x," and a "),wt=l(x,"CODE",{});var _n=o(wt);Fs=r(_n,"__call__"),_n.forEach(a),Rs=r(x," method."),x.forEach(a),ya=u(e),A=l(e,"P",{});var ht=o(A);Ws=r(ht,"If you want to use custom dependencies, e.g. "),ye=l(ht,"A",{href:!0,rel:!0});var vn=o(ye);Bs=r(vn,"optimum"),vn.forEach(a),Ys=r(ht,", the dependencies must be listed in a "),Et=l(ht,"CODE",{});var wn=o(Et);Us=r(wn,"requirements.txt"),wn.forEach(a),Gs=r(ht," as described above in \u201Cadd custom dependencies.\u201D"),ht.forEach(a),_a=u(e),N=l(e,"H2",{class:!0});var us=o(N);G=l(us,"A",{id:!0,class:!0,href:!0});var En=o(G);gt=l(En,"SPAN",{});var gn=o(gt);m(_e.$$.fragment,gn),gn.forEach(a),En.forEach(a),Js=u(us),bt=l(us,"SPAN",{});var bn=o(bt);Xs=r(bn,"Custom Handler Examples"),bn.forEach(a),us.forEach(a),va=u(e),$=l(e,"P",{});var pe=o($);Ks=r(pe,"There are already several public examples on the "),ve=l(pe,"A",{href:!0,rel:!0});var $n=o(ve);Qs=r($n,"Hugging Face Hub"),$n.forEach(a),Zs=r(pe," where you can take insipiration or directly use them. The repositories are tagged with "),$t=l(pe,"CODE",{});var jn=o($t);Vs=r(jn,"endpoints-template"),jn.forEach(a),el=r(pe," and can be found under this "),we=l(pe,"A",{href:!0,rel:!0});var kn=o(we);tl=r(kn,"link"),kn.forEach(a),al=r(pe,"."),pe.forEach(a),wa=u(e),tt=l(e,"P",{});var An=o(tt);sl=r(An,"Included examples are for:"),An.forEach(a),Ea=u(e),c=l(e,"UL",{});var b=o(c);jt=l(b,"LI",{});var Hn=o(jt);Ee=l(Hn,"A",{href:!0,rel:!0});var Cn=o(Ee);ll=r(Cn,"Optimum and ONNX Runtime"),Cn.forEach(a),Hn.forEach(a),ol=u(b),kt=l(b,"LI",{});var qn=o(kt);ge=l(qn,"A",{href:!0,rel:!0});var Pn=o(ge);nl=r(Pn,"Diffusers with stable-diffusion"),Pn.forEach(a),qn.forEach(a),rl=u(b),At=l(b,"LI",{});var xn=o(At);be=l(xn,"A",{href:!0,rel:!0});var Tn=o(be);il=r(Tn,"Image Embeddings with BLIP"),Tn.forEach(a),xn.forEach(a),pl=u(b),Ht=l(b,"LI",{});var In=o(Ht);$e=l(In,"A",{href:!0,rel:!0});var Dn=o($e);dl=r(Dn,"TrOCR for OCR Detection"),Dn.forEach(a),In.forEach(a),hl=u(b),Ct=l(b,"LI",{});var Nn=o(Ct);je=l(Nn,"A",{href:!0,rel:!0});var On=o(je);ul=r(On,"Optimized Sentence Transformers with Optimum"),On.forEach(a),Nn.forEach(a),cl=u(b),qt=l(b,"LI",{});var Sn=o(qt);ke=l(Sn,"A",{href:!0,rel:!0});var Ln=o(ke);fl=r(Ln,"OpenAI Whisper"),Ln.forEach(a),Sn.forEach(a),ml=u(b),Pt=l(b,"LI",{});var zn=o(Pt);Ae=l(zn,"A",{href:!0,rel:!0});var Mn=o(Ae);yl=r(Mn,"LayoutLM"),Mn.forEach(a),zn.forEach(a),b.forEach(a),ga=u(e),O=l(e,"H2",{class:!0});var cs=o(O);J=l(cs,"A",{id:!0,class:!0,href:!0});var Fn=o(J);xt=l(Fn,"SPAN",{});var Rn=o(xt);m(He.$$.fragment,Rn),Rn.forEach(a),Fn.forEach(a),_l=u(cs),Tt=l(cs,"SPAN",{});var Wn=o(Tt);vl=r(Wn,"Tutorial"),Wn.forEach(a),cs.forEach(a),ba=u(e),H=l(e,"P",{});var ut=o(H);wl=r(ut,"Before creating a Custom Handler, you need a Hugging Face Model repository with your model weights and an Access Token with "),It=l(ut,"EM",{});var Bn=o(It);El=r(Bn,"WRITE"),Bn.forEach(a),gl=r(ut," access to the repository. To find, create and manage Access Tokens, click "),Ce=l(ut,"A",{href:!0,rel:!0});var Yn=o(Ce);bl=r(Yn,"here"),Yn.forEach(a),$l=r(ut,"."),ut.forEach(a),$a=u(e),X=l(e,"P",{});var fs=o(X);jl=r(fs,"If you want to write a Custom Handler for an existing model from the community, you can use the "),qe=l(fs,"A",{href:!0,rel:!0});var Un=o(qe);kl=r(Un,"repo_duplicator"),Un.forEach(a),Al=r(fs," to create a repository fork."),fs.forEach(a),ja=u(e),K=l(e,"P",{});var ms=o(K);Hl=r(ms,"The code can also be found in this "),Pe=l(ms,"A",{href:!0,rel:!0});var Gn=o(Pe);Cl=r(Gn,"Notebook"),Gn.forEach(a),ql=r(ms,"."),ms.forEach(a),ka=u(e),xe=l(e,"P",{});var nn=o(xe);Pl=r(nn,"You can also search for already existing Custom Handlers here: "),Te=l(nn,"A",{href:!0,rel:!0});var Jn=o(Te);xl=r(Jn,"https://huggingface.co/models?other=endpoints-template"),Jn.forEach(a),nn.forEach(a),Aa=u(e),S=l(e,"H3",{class:!0});var ys=o(S);Q=l(ys,"A",{id:!0,class:!0,href:!0});var Xn=o(Q);Dt=l(Xn,"SPAN",{});var Kn=o(Dt);m(Ie.$$.fragment,Kn),Kn.forEach(a),Xn.forEach(a),Tl=u(ys),Nt=l(ys,"SPAN",{});var Qn=o(Nt);Il=r(Qn,"1. Set up Development Environment"),Qn.forEach(a),ys.forEach(a),Ha=u(e),at=l(e,"P",{});var Zn=o(at);Dl=r(Zn,"The easiest way to develop your Custom Handler is to set up a local development environment and to implement, test, and iterate on your handler and then deploy it as an Inference Endpoint. The first step is to install all required development dependencies (needed to create the CP, not needed for inference)."),Zn.forEach(a),Ca=u(e),m(De.$$.fragment,e),qa=u(e),st=l(e,"P",{});var Vn=o(st);Nl=r(Vn,"After we have installed our libraries we will clone our repository to our development environment."),Vn.forEach(a),Pa=u(e),Z=l(e,"P",{});var _s=o(Z);Ol=r(_s,"We will use "),Ne=l(_s,"A",{href:!0,rel:!0});var er=o(Ne);Sl=r(er,"philschmid/distilbert-base-uncased-emotion"),er.forEach(a),Ll=r(_s," during the tutorial."),_s.forEach(a),xa=u(e),m(Oe.$$.fragment,e),Ta=u(e),V=l(e,"P",{});var vs=o(V);zl=r(vs,"To be able to push our CP later you need to login into our HF account. This can be done by using the "),Ot=l(vs,"CODE",{});var tr=o(Ot);Ml=r(tr,"huggingface-cli"),tr.forEach(a),Fl=r(vs,"."),vs.forEach(a),Ia=u(e),lt=l(e,"P",{});var ar=o(lt);St=l(ar,"EM",{});var sr=o(St);Rl=r(sr,"Note: Make sure to configure git config as well."),sr.forEach(a),ar.forEach(a),Da=u(e),m(Se.$$.fragment,e),Na=u(e),L=l(e,"H3",{class:!0});var ws=o(L);ee=l(ws,"A",{id:!0,class:!0,href:!0});var lr=o(ee);Lt=l(lr,"SPAN",{});var or=o(Lt);m(Le.$$.fragment,or),or.forEach(a),lr.forEach(a),Wl=u(ws),zt=l(ws,"SPAN",{});var nr=o(zt);Bl=r(nr,"2. Create EndpointHandler (CP)"),nr.forEach(a),ws.forEach(a),Oa=u(e),g=l(e,"P",{});var T=o(g);Yl=r(T,"After you have set up your environment, you can start creating your CP. The CP is a Python class ("),Mt=l(T,"CODE",{});var rr=o(Mt);Ul=r(rr,"EndpointHandler"),rr.forEach(a),Gl=r(T,") inside a "),Ft=l(T,"CODE",{});var ir=o(Ft);Jl=r(ir,"handler.py"),ir.forEach(a),Xl=r(T," file in our repository. The handler.py needs to implement the EndpointHandler class with a "),Rt=l(T,"CODE",{});var pr=o(Rt);Kl=r(pr,"__init__"),pr.forEach(a),Ql=r(T," and a "),Wt=l(T,"CODE",{});var dr=o(Wt);Zl=r(dr,"__call__"),dr.forEach(a),Vl=r(T," method."),T.forEach(a),Sa=u(e),te=l(e,"P",{});var Es=o(te);eo=r(Es,"The "),Bt=l(Es,"CODE",{});var hr=o(Bt);to=r(hr,"__init__"),hr.forEach(a),ao=r(Es," method will be called when starting the Endpoint and will receive 1 argument, a string with the path to your model weights. This allows you to load your model correctly."),Es.forEach(a),La=u(e),C=l(e,"P",{});var ct=o(C);so=r(ct,"The "),Yt=l(ct,"CODE",{});var ur=o(Yt);lo=r(ur,"__call__"),ur.forEach(a),oo=r(ct," method will be called on every request and receive a dictionary with your request body as a python dictionary. It will always contain the "),Ut=l(ct,"CODE",{});var cr=o(Ut);no=r(cr,"inputs"),cr.forEach(a),ro=r(ct," key."),ct.forEach(a),za=u(e),ae=l(e,"P",{});var gs=o(ae);io=r(gs,"To create your "),Gt=l(gs,"CODE",{});var fr=o(Gt);po=r(fr,"handler.py"),fr.forEach(a),ho=r(gs," you have to first switch into your repository and create the file."),gs.forEach(a),Ma=u(e),m(ze.$$.fragment,e),Fa=u(e),j=l(e,"P",{});var de=o(j);uo=r(de,"In there, you define your "),Jt=l(de,"CODE",{});var mr=o(Jt);co=r(mr,"EndpointHandler"),mr.forEach(a),fo=r(de," class with the "),Xt=l(de,"CODE",{});var yr=o(Xt);mo=r(yr,"__init__"),yr.forEach(a),yo=r(de," and "),Kt=l(de,"CODE",{});var _r=o(Kt);_o=r(_r,"__call__ "),_r.forEach(a),vo=r(de,"method."),de.forEach(a),Ra=u(e),m(Me.$$.fragment,e),Wa=u(e),z=l(e,"H3",{class:!0});var bs=o(z);se=l(bs,"A",{id:!0,class:!0,href:!0});var vr=o(se);Qt=l(vr,"SPAN",{});var wr=o(Qt);m(Fe.$$.fragment,wr),wr.forEach(a),vr.forEach(a),wo=u(bs),Zt=l(bs,"SPAN",{});var Er=o(Zt);Eo=r(Er,"3. Customize EndpointHandler"),Er.forEach(a),bs.forEach(a),Ba=u(e),le=l(e,"P",{});var $s=o(le);go=r($s,"Now, you can add all of the custom logic you want to use during initialization or inference to your CP. You can already find multiple "),Re=l($s,"A",{href:!0,rel:!0});var gr=o(Re);bo=r(gr,"Custom Handler on the Hub"),gr.forEach(a),$o=r($s," if you need some inspiration. In our example, we will add a custom condition based on additional payload information."),$s.forEach(a),Ya=u(e),We=l(e,"P",{});var rn=o(We);Vt=l(rn,"EM",{});var br=o(Vt);jo=r(br,"The model we are using in the tutorial is fine-tuned to detect emotions. We will add an additional payload field for the date, and will use an external package to check if it is a holiday, to add a condition so that when the input date is a holiday, the model returns \u201Chappy\u201D - since everyone is happy when there are holidays "),br.forEach(a),ko=r(rn,"\u{1F334}\u{1F389}\u{1F606}"),rn.forEach(a),Ua=u(e),q=l(e,"P",{});var ft=o(q);Ao=r(ft,"First, we need to create a new "),ea=l(ft,"CODE",{});var $r=o(ea);Ho=r($r,"requirements.txt"),$r.forEach(a),Co=r(ft," and add our "),Be=l(ft,"A",{href:!0,rel:!0});var jr=o(Be);qo=r(jr,"holiday detection package"),jr.forEach(a),Po=r(ft," and make sure we have it installed in our development environment as well."),ft.forEach(a),Ga=u(e),m(Ye.$$.fragment,e),Ja=u(e),P=l(e,"P",{});var mt=o(P);xo=r(mt,"Next, we have to adjust our "),ta=l(mt,"CODE",{});var kr=o(ta);To=r(kr,"handler.py"),kr.forEach(a),Io=r(mt," and "),aa=l(mt,"CODE",{});var Ar=o(aa);Do=r(Ar,"EndpointHandler"),Ar.forEach(a),No=r(mt," to match our condition."),mt.forEach(a),Xa=u(e),m(Ue.$$.fragment,e),Ka=u(e),M=l(e,"H3",{class:!0});var js=o(M);oe=l(js,"A",{id:!0,class:!0,href:!0});var Hr=o(oe);sa=l(Hr,"SPAN",{});var Cr=o(sa);m(Ge.$$.fragment,Cr),Cr.forEach(a),Hr.forEach(a),Oo=u(js),la=l(js,"SPAN",{});var qr=o(la);So=r(qr,"4. Test EndpointHandler"),qr.forEach(a),js.forEach(a),Qa=u(e),ot=l(e,"P",{});var Pr=o(ot);Lo=r(Pr,"To test our EndpointHandler, we can simplify import, initialize and test it. Therefore we only need to prepare a sample payload."),Pr.forEach(a),Za=u(e),m(Je.$$.fragment,e),Va=u(e),nt=l(e,"P",{});var xr=o(nt);zo=r(xr,"It works!!!! \u{1F389}"),xr.forEach(a),es=u(e),rt=l(e,"P",{});var Tr=o(rt);oa=l(Tr,"EM",{});var Ir=o(oa);Mo=r(Ir,"Note: If you are using a notebook you might have to restart your kernel when you make changes to the handler.py since it is not automatically re-imported."),Ir.forEach(a),Tr.forEach(a),ts=u(e),F=l(e,"H3",{class:!0});var ks=o(F);ne=l(ks,"A",{id:!0,class:!0,href:!0});var Dr=o(ne);na=l(Dr,"SPAN",{});var Nr=o(na);m(Xe.$$.fragment,Nr),Nr.forEach(a),Dr.forEach(a),Fo=u(ks),ra=l(ks,"SPAN",{});var Or=o(ra);Ro=r(Or,"5. Push the Custom Handler to your repository"),Or.forEach(a),ks.forEach(a),as=u(e),it=l(e,"P",{});var Sr=o(it);Wo=r(Sr,"After you have successfully tested your handler locally, you can push it to your repository by simply using basic git commands."),Sr.forEach(a),ss=u(e),m(Ke.$$.fragment,e),ls=u(e),k=l(e,"P",{});var he=o(k);Bo=r(he,"Now, you should see your "),ia=l(he,"CODE",{});var Lr=o(ia);Yo=r(Lr,"handler.py"),Lr.forEach(a),Uo=r(he," and "),pa=l(he,"CODE",{});var zr=o(pa);Go=r(zr,"requirements.txt"),zr.forEach(a),Jo=r(he," in your repository in the "),Qe=l(he,"A",{href:!0,rel:!0});var Mr=o(Qe);Xo=r(Mr,"\u201CFiles and version\u201D"),Mr.forEach(a),Ko=r(he," tab."),he.forEach(a),os=u(e),R=l(e,"H3",{class:!0});var As=o(R);re=l(As,"A",{id:!0,class:!0,href:!0});var Fr=o(re);da=l(Fr,"SPAN",{});var Rr=o(da);m(Ze.$$.fragment,Rr),Rr.forEach(a),Fr.forEach(a),Qo=u(As),ha=l(As,"SPAN",{});var Wr=o(ha);Zo=r(Wr,"6. Deploy your Custom Handler as an Inference Endpoint"),Wr.forEach(a),As.forEach(a),ns=u(e),pt=l(e,"P",{});var Br=o(pt);Vo=r(Br,"The last step is to deploy your Custom Handler as an Inference Endpoint. You can deploy your custom Custom Handler the same way as a regular Inference Endpoint. Add your repository, select your cloud and region, your instance and security setting, and deploy."),Br.forEach(a),rs=u(e),ie=l(e,"P",{});var Hs=o(ie);en=r(Hs,"The Inference Endpoint Service will check during the creation of your Endpoint if there is a "),ua=l(Hs,"CODE",{});var Yr=o(ua);tn=r(Yr,"handler.py"),Yr.forEach(a),an=r(Hs," available and valid and will use it for serving requests no matter which \u201CTask\u201D you select."),Hs.forEach(a),is=u(e),dt=l(e,"P",{});var Ur=o(dt);Ve=l(Ur,"EM",{});var Cs=o(Ve);sn=r(Cs,"Note: In your "),et=l(Cs,"A",{href:!0,rel:!0});var Gr=o(et);ln=r(Gr,"Inference Endpoints dashboard"),Gr.forEach(a),on=r(Cs,", the Task for this Endpoint should now be set to Custom"),Cs.forEach(a),Ur.forEach(a),this.h()},h(){d(I,"name","hf:doc:metadata"),d(I,"content",JSON.stringify(ti)),d(Y,"id","create-custom-inference-handler"),d(Y,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),d(Y,"href","#create-custom-inference-handler"),d(D,"class","relative group"),d(ce,"href","https://huggingface.co/philschmid/distilbert-onnx-banking77/main/handler.py"),d(ce,"rel","nofollow"),d(fe,"href","https://huggingface.co/philschmid/distilbert-onnx-banking77/main/handler.py"),d(fe,"rel","nofollow"),d(me,"href","https://huggingface.co/philschmid/distilbert-onnx-banking77/main/handler.py"),d(me,"rel","nofollow"),d(ye,"href","https://raw.githubusercontent.com/huggingface/optimum"),d(ye,"rel","nofollow"),d(G,"id","custom-handler-examples"),d(G,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),d(G,"href","#custom-handler-examples"),d(N,"class","relative group"),d(ve,"href","https://huggingface.co/models?other=endpoints-template"),d(ve,"rel","nofollow"),d(we,"href","https://huggingface.co/models?other=endpoints-template"),d(we,"rel","nofollow"),d(Ee,"href","https://huggingface.co/philschmid/distilbert-onnx-banking77"),d(Ee,"rel","nofollow"),d(ge,"href","https://huggingface.co/philschmid/stable-diffusion-v1-4-endpoints"),d(ge,"rel","nofollow"),d(be,"href","https://huggingface.co/florentgbelidji/blip_image_embeddings"),d(be,"rel","nofollow"),d($e,"href","https://huggingface.co/philschmid/trocr-base-printed"),d($e,"rel","nofollow"),d(je,"href","https://huggingface.co/philschmid/all-MiniLM-L6-v2-optimum-embeddings"),d(je,"rel","nofollow"),d(ke,"href","https://huggingface.co/philschmid/openai-whisper-endpoint"),d(ke,"rel","nofollow"),d(Ae,"href","https://huggingface.co/philschmid/layoutlm-funsd"),d(Ae,"rel","nofollow"),d(J,"id","tutorial"),d(J,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),d(J,"href","#tutorial"),d(O,"class","relative group"),d(Ce,"href","https://huggingface.co/settings/tokens"),d(Ce,"rel","nofollow"),d(qe,"href","https://huggingface.co/spaces/osanseviero/repo_duplicator"),d(qe,"rel","nofollow"),d(Pe,"href","https://colab.research.google.com/drive/1hANJeRa1PK1gZaUorobnQGu4bFj4_4Rf?usp=sharing"),d(Pe,"rel","nofollow"),d(Te,"href","https://huggingface.co/models?other=endpoints-template"),d(Te,"rel","nofollow"),d(Q,"id","1-set-up-development-environment"),d(Q,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),d(Q,"href","#1-set-up-development-environment"),d(S,"class","relative group"),d(Ne,"href","https://huggingface.co/philschmid/distilbert-base-uncased-emotion"),d(Ne,"rel","nofollow"),d(ee,"id","2-create-endpointhandler-cp"),d(ee,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),d(ee,"href","#2-create-endpointhandler-cp"),d(L,"class","relative group"),d(se,"id","3-customize-endpointhandler"),d(se,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),d(se,"href","#3-customize-endpointhandler"),d(z,"class","relative group"),d(Re,"href","https://huggingface.co/models?other=endpoints-template"),d(Re,"rel","nofollow"),d(Be,"href","https://pypi.org/project/holidays/"),d(Be,"rel","nofollow"),d(oe,"id","4-test-endpointhandler"),d(oe,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),d(oe,"href","#4-test-endpointhandler"),d(M,"class","relative group"),d(ne,"id","5-push-the-custom-handler-to-your-repository"),d(ne,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),d(ne,"href","#5-push-the-custom-handler-to-your-repository"),d(F,"class","relative group"),d(Qe,"href","https://huggingface.co/philschmid/distilbert-base-uncased-emotion/tree/main"),d(Qe,"rel","nofollow"),d(re,"id","6-deploy-your-custom-handler-as-an-inference-endpoint"),d(re,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),d(re,"href","#6-deploy-your-custom-handler-as-an-inference-endpoint"),d(R,"class","relative group"),d(et,"href","https://ui.endpoints.huggingface.co/"),d(et,"rel","nofollow")},m(e,i){t(document.head,I),p(e,ca,i),p(e,D,i),t(D,Y),t(Y,yt),y(ue,yt,null),t(D,qs),t(D,_t),t(_t,Ps),p(e,fa,i),p(e,U,i),t(U,xs),t(U,ce),t(ce,Ts),t(U,Is),p(e,ma,i),p(e,E,i),t(E,Ds),t(E,fe),t(fe,Ns),t(E,Os),t(E,me),t(me,Ss),t(E,Ls),t(E,vt),t(vt,zs),t(E,Ms),t(E,wt),t(wt,Fs),t(E,Rs),p(e,ya,i),p(e,A,i),t(A,Ws),t(A,ye),t(ye,Bs),t(A,Ys),t(A,Et),t(Et,Us),t(A,Gs),p(e,_a,i),p(e,N,i),t(N,G),t(G,gt),y(_e,gt,null),t(N,Js),t(N,bt),t(bt,Xs),p(e,va,i),p(e,$,i),t($,Ks),t($,ve),t(ve,Qs),t($,Zs),t($,$t),t($t,Vs),t($,el),t($,we),t(we,tl),t($,al),p(e,wa,i),p(e,tt,i),t(tt,sl),p(e,Ea,i),p(e,c,i),t(c,jt),t(jt,Ee),t(Ee,ll),t(c,ol),t(c,kt),t(kt,ge),t(ge,nl),t(c,rl),t(c,At),t(At,be),t(be,il),t(c,pl),t(c,Ht),t(Ht,$e),t($e,dl),t(c,hl),t(c,Ct),t(Ct,je),t(je,ul),t(c,cl),t(c,qt),t(qt,ke),t(ke,fl),t(c,ml),t(c,Pt),t(Pt,Ae),t(Ae,yl),p(e,ga,i),p(e,O,i),t(O,J),t(J,xt),y(He,xt,null),t(O,_l),t(O,Tt),t(Tt,vl),p(e,ba,i),p(e,H,i),t(H,wl),t(H,It),t(It,El),t(H,gl),t(H,Ce),t(Ce,bl),t(H,$l),p(e,$a,i),p(e,X,i),t(X,jl),t(X,qe),t(qe,kl),t(X,Al),p(e,ja,i),p(e,K,i),t(K,Hl),t(K,Pe),t(Pe,Cl),t(K,ql),p(e,ka,i),p(e,xe,i),t(xe,Pl),t(xe,Te),t(Te,xl),p(e,Aa,i),p(e,S,i),t(S,Q),t(Q,Dt),y(Ie,Dt,null),t(S,Tl),t(S,Nt),t(Nt,Il),p(e,Ha,i),p(e,at,i),t(at,Dl),p(e,Ca,i),y(De,e,i),p(e,qa,i),p(e,st,i),t(st,Nl),p(e,Pa,i),p(e,Z,i),t(Z,Ol),t(Z,Ne),t(Ne,Sl),t(Z,Ll),p(e,xa,i),y(Oe,e,i),p(e,Ta,i),p(e,V,i),t(V,zl),t(V,Ot),t(Ot,Ml),t(V,Fl),p(e,Ia,i),p(e,lt,i),t(lt,St),t(St,Rl),p(e,Da,i),y(Se,e,i),p(e,Na,i),p(e,L,i),t(L,ee),t(ee,Lt),y(Le,Lt,null),t(L,Wl),t(L,zt),t(zt,Bl),p(e,Oa,i),p(e,g,i),t(g,Yl),t(g,Mt),t(Mt,Ul),t(g,Gl),t(g,Ft),t(Ft,Jl),t(g,Xl),t(g,Rt),t(Rt,Kl),t(g,Ql),t(g,Wt),t(Wt,Zl),t(g,Vl),p(e,Sa,i),p(e,te,i),t(te,eo),t(te,Bt),t(Bt,to),t(te,ao),p(e,La,i),p(e,C,i),t(C,so),t(C,Yt),t(Yt,lo),t(C,oo),t(C,Ut),t(Ut,no),t(C,ro),p(e,za,i),p(e,ae,i),t(ae,io),t(ae,Gt),t(Gt,po),t(ae,ho),p(e,Ma,i),y(ze,e,i),p(e,Fa,i),p(e,j,i),t(j,uo),t(j,Jt),t(Jt,co),t(j,fo),t(j,Xt),t(Xt,mo),t(j,yo),t(j,Kt),t(Kt,_o),t(j,vo),p(e,Ra,i),y(Me,e,i),p(e,Wa,i),p(e,z,i),t(z,se),t(se,Qt),y(Fe,Qt,null),t(z,wo),t(z,Zt),t(Zt,Eo),p(e,Ba,i),p(e,le,i),t(le,go),t(le,Re),t(Re,bo),t(le,$o),p(e,Ya,i),p(e,We,i),t(We,Vt),t(Vt,jo),t(We,ko),p(e,Ua,i),p(e,q,i),t(q,Ao),t(q,ea),t(ea,Ho),t(q,Co),t(q,Be),t(Be,qo),t(q,Po),p(e,Ga,i),y(Ye,e,i),p(e,Ja,i),p(e,P,i),t(P,xo),t(P,ta),t(ta,To),t(P,Io),t(P,aa),t(aa,Do),t(P,No),p(e,Xa,i),y(Ue,e,i),p(e,Ka,i),p(e,M,i),t(M,oe),t(oe,sa),y(Ge,sa,null),t(M,Oo),t(M,la),t(la,So),p(e,Qa,i),p(e,ot,i),t(ot,Lo),p(e,Za,i),y(Je,e,i),p(e,Va,i),p(e,nt,i),t(nt,zo),p(e,es,i),p(e,rt,i),t(rt,oa),t(oa,Mo),p(e,ts,i),p(e,F,i),t(F,ne),t(ne,na),y(Xe,na,null),t(F,Fo),t(F,ra),t(ra,Ro),p(e,as,i),p(e,it,i),t(it,Wo),p(e,ss,i),y(Ke,e,i),p(e,ls,i),p(e,k,i),t(k,Bo),t(k,ia),t(ia,Yo),t(k,Uo),t(k,pa),t(pa,Go),t(k,Jo),t(k,Qe),t(Qe,Xo),t(k,Ko),p(e,os,i),p(e,R,i),t(R,re),t(re,da),y(Ze,da,null),t(R,Qo),t(R,ha),t(ha,Zo),p(e,ns,i),p(e,pt,i),t(pt,Vo),p(e,rs,i),p(e,ie,i),t(ie,en),t(ie,ua),t(ua,tn),t(ie,an),p(e,is,i),p(e,dt,i),t(dt,Ve),t(Ve,sn),t(Ve,et),t(et,ln),t(Ve,on),ps=!0},p:Zr,i(e){ps||(_(ue.$$.fragment,e),_(_e.$$.fragment,e),_(He.$$.fragment,e),_(Ie.$$.fragment,e),_(De.$$.fragment,e),_(Oe.$$.fragment,e),_(Se.$$.fragment,e),_(Le.$$.fragment,e),_(ze.$$.fragment,e),_(Me.$$.fragment,e),_(Fe.$$.fragment,e),_(Ye.$$.fragment,e),_(Ue.$$.fragment,e),_(Ge.$$.fragment,e),_(Je.$$.fragment,e),_(Xe.$$.fragment,e),_(Ke.$$.fragment,e),_(Ze.$$.fragment,e),ps=!0)},o(e){v(ue.$$.fragment,e),v(_e.$$.fragment,e),v(He.$$.fragment,e),v(Ie.$$.fragment,e),v(De.$$.fragment,e),v(Oe.$$.fragment,e),v(Se.$$.fragment,e),v(Le.$$.fragment,e),v(ze.$$.fragment,e),v(Me.$$.fragment,e),v(Fe.$$.fragment,e),v(Ye.$$.fragment,e),v(Ue.$$.fragment,e),v(Ge.$$.fragment,e),v(Je.$$.fragment,e),v(Xe.$$.fragment,e),v(Ke.$$.fragment,e),v(Ze.$$.fragment,e),ps=!1},d(e){a(I),e&&a(ca),e&&a(D),w(ue),e&&a(fa),e&&a(U),e&&a(ma),e&&a(E),e&&a(ya),e&&a(A),e&&a(_a),e&&a(N),w(_e),e&&a(va),e&&a($),e&&a(wa),e&&a(tt),e&&a(Ea),e&&a(c),e&&a(ga),e&&a(O),w(He),e&&a(ba),e&&a(H),e&&a($a),e&&a(X),e&&a(ja),e&&a(K),e&&a(ka),e&&a(xe),e&&a(Aa),e&&a(S),w(Ie),e&&a(Ha),e&&a(at),e&&a(Ca),w(De,e),e&&a(qa),e&&a(st),e&&a(Pa),e&&a(Z),e&&a(xa),w(Oe,e),e&&a(Ta),e&&a(V),e&&a(Ia),e&&a(lt),e&&a(Da),w(Se,e),e&&a(Na),e&&a(L),w(Le),e&&a(Oa),e&&a(g),e&&a(Sa),e&&a(te),e&&a(La),e&&a(C),e&&a(za),e&&a(ae),e&&a(Ma),w(ze,e),e&&a(Fa),e&&a(j),e&&a(Ra),w(Me,e),e&&a(Wa),e&&a(z),w(Fe),e&&a(Ba),e&&a(le),e&&a(Ya),e&&a(We),e&&a(Ua),e&&a(q),e&&a(Ga),w(Ye,e),e&&a(Ja),e&&a(P),e&&a(Xa),w(Ue,e),e&&a(Ka),e&&a(M),w(Ge),e&&a(Qa),e&&a(ot),e&&a(Za),w(Je,e),e&&a(Va),e&&a(nt),e&&a(es),e&&a(rt),e&&a(ts),e&&a(F),w(Xe),e&&a(as),e&&a(it),e&&a(ss),w(Ke,e),e&&a(ls),e&&a(k),e&&a(os),e&&a(R),w(Ze),e&&a(ns),e&&a(pt),e&&a(rs),e&&a(ie),e&&a(is),e&&a(dt)}}}const ti={local:"create-custom-inference-handler",sections:[{local:"custom-handler-examples",title:"Custom Handler Examples"},{local:"tutorial",sections:[{local:"1-set-up-development-environment",title:"1. Set up Development Environment"},{local:"2-create-endpointhandler-cp",title:"2. Create EndpointHandler (CP)"},{local:"3-customize-endpointhandler",title:"3. Customize EndpointHandler"},{local:"4-test-endpointhandler",title:"4. Test EndpointHandler"},{local:"5-push-the-custom-handler-to-your-repository",title:"5. Push the Custom Handler to your repository"},{local:"6-deploy-your-custom-handler-as-an-inference-endpoint",title:"6. Deploy your Custom Handler as an Inference Endpoint"}],title:"Tutorial"}],title:"Create custom Inference Handler"};function ai(pn){return Vr(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class ni extends Jr{constructor(I){super();Xr(this,I,ai,ei,Kr,{})}}export{ni as default,ti as metadata};
