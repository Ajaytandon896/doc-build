import{S as zt,i as Gt,s as Zt,e as a,k as l,w as W,t as p,M as Rt,c as o,d as t,m as h,a as r,x as Y,h as d,b as n,G as i,g as c,y as F,L as Bt,q as V,o as J,B as K,v as Wt}from"../../../chunks/vendor-hf-doc-builder.js";import{D as Ot}from"../../../chunks/Docstring-hf-doc-builder.js";import{I as ke}from"../../../chunks/IconCopyLink-hf-doc-builder.js";function Yt(dt){let f,fe,m,P,Q,N,qe,X,Se,me,v,w,ee,A,Le,te,Ce,ve,I,T,He,Ue,ge,U,je,_e,j,Oe,be,y,ze,x,Ge,Ze,De,g,M,ie,k,Re,ae,Be,Pe,$,oe,_,re,We,Ye,ne,Fe,Ve,O,Je,Ke,se,b,le,q,Qe,Xe,he,pe,et,tt,z,it,we,D,E,de,S,at,ce,ot,ye,u,L,rt,C,nt,ue,st,lt,ht,G,H,Me;return N=new ke({}),A=new ke({}),k=new ke({}),S=new ke({}),L=new Ot({props:{name:"class diffusers.PNDMPipeline",anchor:"diffusers.PNDMPipeline",parameters:[{name:"unet",val:": UNet2DModel"},{name:"scheduler",val:": PNDMScheduler"}],parametersDescription:[{anchor:"diffusers.PNDMPipeline.unet",description:"<strong>unet</strong> (<code>UNet2DModel</code>) &#x2014; U-Net architecture to denoise the encoded image latents.",name:"unet"},{anchor:"diffusers.PNDMPipeline.scheduler",description:`<strong>scheduler</strong> ([<em>SchedulerMixin</em>]) &#x2014;
The <em>PNDMScheduler</em> to be used in combination with <em>unet</em> to denoise the encoded image.`,name:"scheduler"}],source:"https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/pndm/pipeline_pndm.py#L27"}}),H=new Ot({props:{name:"__call__",anchor:"diffusers.PNDMPipeline.__call__",parameters:[{name:"batch_size",val:": int = 1"},{name:"num_inference_steps",val:": int = 50"},{name:"generator",val:": typing.Optional[torch._C.Generator] = None"},{name:"output_type",val:": typing.Optional[str] = 'pil'"},{name:"return_dict",val:": bool = True"},{name:"**kwargs",val:""}],parametersDescription:[{anchor:"diffusers.PNDMPipeline.__call__.batch_size",description:"<strong>batch_size</strong> (<code>int</code>, <em>optional</em>, defaults to 1) &#x2014; The number of images to generate.",name:"batch_size"},{anchor:"diffusers.PNDMPipeline.__call__.num_inference_steps",description:`<strong>num_inference_steps</strong> ( &#x2014;
obj:<em>int</em>, <em>optional</em>, defaults to 50): The number of denoising steps. More denoising steps usually
lead to a higher quality image at the expense of slower inference.`,name:"num_inference_steps"},{anchor:"diffusers.PNDMPipeline.__call__.generator",description:`<strong>generator</strong> ( &#x2014;
obj:<em>torch.Generator</em>, <em>optional</em>): A <a href="https://pytorch.org/docs/stable/generated/torch.Generator.html" rel="nofollow">torch
generator</a> to make generation
deterministic.`,name:"generator"},{anchor:"diffusers.PNDMPipeline.__call__.output_type",description:`<strong>output_type</strong> ( &#x2014;
obj:<em>str</em>, <em>optional</em>, defaults to <code>&quot;pil&quot;</code>): The output format of the generate image. Choose
between <a href="https://pillow.readthedocs.io/en/stable/" rel="nofollow">PIL</a>: <em>PIL.Image.Image</em> or <em>nd.array</em>.`,name:"output_type"},{anchor:"diffusers.PNDMPipeline.__call__.return_dict",description:`<strong>return_dict</strong> ( &#x2014;
obj:<em>bool</em>, <em>optional</em>, defaults to <code>True</code>): Whether or not to return a
[<em>~pipeline_utils.ImagePipelineOutput</em>] instead of a plain tuple.`,name:"return_dict"}],source:"https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/pndm/pipeline_pndm.py#L46"}}),{c(){f=a("meta"),fe=l(),m=a("h1"),P=a("a"),Q=a("span"),W(N.$$.fragment),qe=l(),X=a("span"),Se=p("PNDM"),me=l(),v=a("h2"),w=a("a"),ee=a("span"),W(A.$$.fragment),Le=l(),te=a("span"),Ce=p("Overview"),ve=l(),I=a("p"),T=a("a"),He=p("Pseudo Numerical methods for Diffusion Models on manifolds"),Ue=p(" (PNDM) by  Luping Liu, Yi Ren, Zhijie Lin and Zhou Zhao."),ge=l(),U=a("p"),je=p("The abstract of the paper is the following:"),_e=l(),j=a("p"),Oe=p("Denoising Diffusion Probabilistic Models (DDPMs) can generate high-quality samples such as image and audio samples. However, DDPMs require hundreds to thousands of iterations to produce final samples. Several prior works have successfully accelerated DDPMs through adjusting the variance schedule (e.g., Improved Denoising Diffusion Probabilistic Models) or the denoising equation (e.g., Denoising Diffusion Implicit Models (DDIMs)). However, these acceleration methods cannot maintain the quality of samples and even introduce new noise at a high speedup rate, which limit their practicability. To accelerate the inference process while keeping the sample quality, we provide a fresh perspective that DDPMs should be treated as solving differential equations on manifolds. Under such a perspective, we propose pseudo numerical methods for diffusion models (PNDMs). Specifically, we figure out how to solve differential equations on manifolds and show that DDIMs are simple cases of pseudo numerical methods. We change several classical numerical methods to corresponding pseudo numerical methods and find that the pseudo linear multi-step method is the best in most situations. According to our experiments, by directly using pre-trained models on Cifar10, CelebA and LSUN, PNDMs can generate higher quality synthetic images with only 50 steps compared with 1000-step DDIMs (20x speedup), significantly outperform DDIMs with 250 steps (by around 0.4 in FID) and have good generalization on different variance schedules."),be=l(),y=a("p"),ze=p("The original codebase can be found "),x=a("a"),Ge=p("here"),Ze=p("."),De=l(),g=a("h2"),M=a("a"),ie=a("span"),W(k.$$.fragment),Re=l(),ae=a("span"),Be=p("Available Pipelines:"),Pe=l(),$=a("table"),oe=a("thead"),_=a("tr"),re=a("th"),We=p("Pipeline"),Ye=l(),ne=a("th"),Fe=p("Tasks"),Ve=l(),O=a("th"),Je=p("Colab"),Ke=l(),se=a("tbody"),b=a("tr"),le=a("td"),q=a("a"),Qe=p("pipeline_pndm.py"),Xe=l(),he=a("td"),pe=a("em"),et=p("Unconditional Image Generation"),tt=l(),z=a("td"),it=p("-"),we=l(),D=a("h2"),E=a("a"),de=a("span"),W(S.$$.fragment),at=l(),ce=a("span"),ot=p("API"),ye=l(),u=a("div"),W(L.$$.fragment),rt=l(),C=a("p"),nt=p("This model inherits from ["),ue=a("em"),st=p("DiffusionPipeline"),lt=p(`]. Check the superclass documentation for the generic methods the
library implements for all the pipelines (such as downloading or saving, running on a particular device, etc.)`),ht=l(),G=a("div"),W(H.$$.fragment),this.h()},l(e){const s=Rt('[data-svelte="svelte-1phssyn"]',document.head);f=o(s,"META",{name:!0,content:!0}),s.forEach(t),fe=h(e),m=o(e,"H1",{class:!0});var $e=r(m);P=o($e,"A",{id:!0,class:!0,href:!0});var ct=r(P);Q=o(ct,"SPAN",{});var ut=r(Q);Y(N.$$.fragment,ut),ut.forEach(t),ct.forEach(t),qe=h($e),X=o($e,"SPAN",{});var ft=r(X);Se=d(ft,"PNDM"),ft.forEach(t),$e.forEach(t),me=h(e),v=o(e,"H2",{class:!0});var Ee=r(v);w=o(Ee,"A",{id:!0,class:!0,href:!0});var mt=r(w);ee=o(mt,"SPAN",{});var vt=r(ee);Y(A.$$.fragment,vt),vt.forEach(t),mt.forEach(t),Le=h(Ee),te=o(Ee,"SPAN",{});var gt=r(te);Ce=d(gt,"Overview"),gt.forEach(t),Ee.forEach(t),ve=h(e),I=o(e,"P",{});var pt=r(I);T=o(pt,"A",{href:!0,rel:!0});var _t=r(T);He=d(_t,"Pseudo Numerical methods for Diffusion Models on manifolds"),_t.forEach(t),Ue=d(pt," (PNDM) by  Luping Liu, Yi Ren, Zhijie Lin and Zhou Zhao."),pt.forEach(t),ge=h(e),U=o(e,"P",{});var bt=r(U);je=d(bt,"The abstract of the paper is the following:"),bt.forEach(t),_e=h(e),j=o(e,"P",{});var Dt=r(j);Oe=d(Dt,"Denoising Diffusion Probabilistic Models (DDPMs) can generate high-quality samples such as image and audio samples. However, DDPMs require hundreds to thousands of iterations to produce final samples. Several prior works have successfully accelerated DDPMs through adjusting the variance schedule (e.g., Improved Denoising Diffusion Probabilistic Models) or the denoising equation (e.g., Denoising Diffusion Implicit Models (DDIMs)). However, these acceleration methods cannot maintain the quality of samples and even introduce new noise at a high speedup rate, which limit their practicability. To accelerate the inference process while keeping the sample quality, we provide a fresh perspective that DDPMs should be treated as solving differential equations on manifolds. Under such a perspective, we propose pseudo numerical methods for diffusion models (PNDMs). Specifically, we figure out how to solve differential equations on manifolds and show that DDIMs are simple cases of pseudo numerical methods. We change several classical numerical methods to corresponding pseudo numerical methods and find that the pseudo linear multi-step method is the best in most situations. According to our experiments, by directly using pre-trained models on Cifar10, CelebA and LSUN, PNDMs can generate higher quality synthetic images with only 50 steps compared with 1000-step DDIMs (20x speedup), significantly outperform DDIMs with 250 steps (by around 0.4 in FID) and have good generalization on different variance schedules."),Dt.forEach(t),be=h(e),y=o(e,"P",{});var Ne=r(y);ze=d(Ne,"The original codebase can be found "),x=o(Ne,"A",{href:!0,rel:!0});var Pt=r(x);Ge=d(Pt,"here"),Pt.forEach(t),Ze=d(Ne,"."),Ne.forEach(t),De=h(e),g=o(e,"H2",{class:!0});var Ae=r(g);M=o(Ae,"A",{id:!0,class:!0,href:!0});var wt=r(M);ie=o(wt,"SPAN",{});var yt=r(ie);Y(k.$$.fragment,yt),yt.forEach(t),wt.forEach(t),Re=h(Ae),ae=o(Ae,"SPAN",{});var Mt=r(ae);Be=d(Mt,"Available Pipelines:"),Mt.forEach(t),Ae.forEach(t),Pe=h(e),$=o(e,"TABLE",{});var Ie=r($);oe=o(Ie,"THEAD",{});var $t=r(oe);_=o($t,"TR",{});var Z=r(_);re=o(Z,"TH",{});var Et=r(re);We=d(Et,"Pipeline"),Et.forEach(t),Ye=h(Z),ne=o(Z,"TH",{});var Nt=r(ne);Fe=d(Nt,"Tasks"),Nt.forEach(t),Ve=h(Z),O=o(Z,"TH",{align:!0});var At=r(O);Je=d(At,"Colab"),At.forEach(t),Z.forEach(t),$t.forEach(t),Ke=h(Ie),se=o(Ie,"TBODY",{});var It=r(se);b=o(It,"TR",{});var R=r(b);le=o(R,"TD",{});var Tt=r(le);q=o(Tt,"A",{href:!0,rel:!0});var xt=r(q);Qe=d(xt,"pipeline_pndm.py"),xt.forEach(t),Tt.forEach(t),Xe=h(R),he=o(R,"TD",{});var kt=r(he);pe=o(kt,"EM",{});var qt=r(pe);et=d(qt,"Unconditional Image Generation"),qt.forEach(t),kt.forEach(t),tt=h(R),z=o(R,"TD",{align:!0});var St=r(z);it=d(St,"-"),St.forEach(t),R.forEach(t),It.forEach(t),Ie.forEach(t),we=h(e),D=o(e,"H2",{class:!0});var Te=r(D);E=o(Te,"A",{id:!0,class:!0,href:!0});var Lt=r(E);de=o(Lt,"SPAN",{});var Ct=r(de);Y(S.$$.fragment,Ct),Ct.forEach(t),Lt.forEach(t),at=h(Te),ce=o(Te,"SPAN",{});var Ht=r(ce);ot=d(Ht,"API"),Ht.forEach(t),Te.forEach(t),ye=h(e),u=o(e,"DIV",{class:!0});var B=r(u);Y(L.$$.fragment,B),rt=h(B),C=o(B,"P",{});var xe=r(C);nt=d(xe,"This model inherits from ["),ue=o(xe,"EM",{});var Ut=r(ue);st=d(Ut,"DiffusionPipeline"),Ut.forEach(t),lt=d(xe,`]. Check the superclass documentation for the generic methods the
library implements for all the pipelines (such as downloading or saving, running on a particular device, etc.)`),xe.forEach(t),ht=h(B),G=o(B,"DIV",{class:!0});var jt=r(G);Y(H.$$.fragment,jt),jt.forEach(t),B.forEach(t),this.h()},h(){n(f,"name","hf:doc:metadata"),n(f,"content",JSON.stringify(Ft)),n(P,"id","pndm"),n(P,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),n(P,"href","#pndm"),n(m,"class","relative group"),n(w,"id","overview"),n(w,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),n(w,"href","#overview"),n(v,"class","relative group"),n(T,"href","https://arxiv.org/abs/2202.09778"),n(T,"rel","nofollow"),n(x,"href","https://github.com/luping-liu/PNDM"),n(x,"rel","nofollow"),n(M,"id","available-pipelines"),n(M,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),n(M,"href","#available-pipelines"),n(g,"class","relative group"),n(O,"align","center"),n(q,"href","https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/pndm/pipeline_pndm.py"),n(q,"rel","nofollow"),n(z,"align","center"),n(E,"id","diffusers.PNDMPipeline"),n(E,"class","header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full"),n(E,"href","#diffusers.PNDMPipeline"),n(D,"class","relative group"),n(G,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),n(u,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8")},m(e,s){i(document.head,f),c(e,fe,s),c(e,m,s),i(m,P),i(P,Q),F(N,Q,null),i(m,qe),i(m,X),i(X,Se),c(e,me,s),c(e,v,s),i(v,w),i(w,ee),F(A,ee,null),i(v,Le),i(v,te),i(te,Ce),c(e,ve,s),c(e,I,s),i(I,T),i(T,He),i(I,Ue),c(e,ge,s),c(e,U,s),i(U,je),c(e,_e,s),c(e,j,s),i(j,Oe),c(e,be,s),c(e,y,s),i(y,ze),i(y,x),i(x,Ge),i(y,Ze),c(e,De,s),c(e,g,s),i(g,M),i(M,ie),F(k,ie,null),i(g,Re),i(g,ae),i(ae,Be),c(e,Pe,s),c(e,$,s),i($,oe),i(oe,_),i(_,re),i(re,We),i(_,Ye),i(_,ne),i(ne,Fe),i(_,Ve),i(_,O),i(O,Je),i($,Ke),i($,se),i(se,b),i(b,le),i(le,q),i(q,Qe),i(b,Xe),i(b,he),i(he,pe),i(pe,et),i(b,tt),i(b,z),i(z,it),c(e,we,s),c(e,D,s),i(D,E),i(E,de),F(S,de,null),i(D,at),i(D,ce),i(ce,ot),c(e,ye,s),c(e,u,s),F(L,u,null),i(u,rt),i(u,C),i(C,nt),i(C,ue),i(ue,st),i(C,lt),i(u,ht),i(u,G),F(H,G,null),Me=!0},p:Bt,i(e){Me||(V(N.$$.fragment,e),V(A.$$.fragment,e),V(k.$$.fragment,e),V(S.$$.fragment,e),V(L.$$.fragment,e),V(H.$$.fragment,e),Me=!0)},o(e){J(N.$$.fragment,e),J(A.$$.fragment,e),J(k.$$.fragment,e),J(S.$$.fragment,e),J(L.$$.fragment,e),J(H.$$.fragment,e),Me=!1},d(e){t(f),e&&t(fe),e&&t(m),K(N),e&&t(me),e&&t(v),K(A),e&&t(ve),e&&t(I),e&&t(ge),e&&t(U),e&&t(_e),e&&t(j),e&&t(be),e&&t(y),e&&t(De),e&&t(g),K(k),e&&t(Pe),e&&t($),e&&t(we),e&&t(D),K(S),e&&t(ye),e&&t(u),K(L),K(H)}}}const Ft={local:"pndm",sections:[{local:"overview",title:"Overview"},{local:"available-pipelines",title:"Available Pipelines:"},{local:"diffusers.PNDMPipeline",title:"API"}],title:"PNDM"};function Vt(dt){return Wt(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class Xt extends zt{constructor(f){super();Gt(this,f,Vt,Yt,Zt,{})}}export{Xt as default,Ft as metadata};
